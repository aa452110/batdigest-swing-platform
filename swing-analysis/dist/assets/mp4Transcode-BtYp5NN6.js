import{_ as s}from"./index-BpzKRfzN.js";let p=!1,l=null,t=null;async function w(){if(p)return;const[{FFmpeg:r},a]=await Promise.all([s(()=>import("./index-CUxsIblL.js"),[]),s(()=>import("./index-607UPNXL.js"),[])]);l=r;const e="/ffmpeg/",c=await a.toBlobURL(e+"ffmpeg-core.js","text/javascript"),o=await a.toBlobURL(e+"ffmpeg-core.wasm","application/wasm"),i=await a.toBlobURL(e+"ffmpeg-core.worker.js","text/javascript");t=new l,await t.load({coreURL:c,wasmURL:o,workerURL:i}),p=!0}async function d(r,a){await w(),t.on("progress",({progress:n})=>{a&&a(Math.max(0,Math.min(100,Math.round(n*100))))});const{fetchFile:e}=await s(async()=>{const{fetchFile:n}=await import("./index-607UPNXL.js");return{fetchFile:n}},[]),c=await e(r),o="input.webm",i="output.mp4";await t.writeFile(o,c);const m=["-i",o,"-c:v","libx264","-preset","veryfast","-crf","23","-pix_fmt","yuv420p","-c:a","aac","-b:a","128k","-movflags","+faststart",i];await t.exec(m);const f=await t.readFile(i),u=new Blob([f],{type:"video/mp4"});try{await t.deleteFile(o)}catch{}try{await t.deleteFile(i)}catch{}return u}export{d as transcodeWebmToMp4};
