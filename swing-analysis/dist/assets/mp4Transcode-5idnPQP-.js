import{_ as p}from"./index-ZEBBV-EC.js";let m=!1,l=null,a=null;async function w(){if(m)return;const[{FFmpeg:s},e]=await Promise.all([p(()=>import("./index-CUxsIblL.js"),[]),p(()=>import("./index-607UPNXL.js"),[])]);l=s;let c,r,t;try{const o="https://unpkg.com/@ffmpeg/core@0.12.10/dist/umd/";c=await e.toBlobURL(o+"ffmpeg-core.js","text/javascript"),r=await e.toBlobURL(o+"ffmpeg-core.wasm","application/wasm"),t=""}catch{const o="https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.10/dist/umd/";c=await e.toBlobURL(o+"ffmpeg-core.js","text/javascript"),r=await e.toBlobURL(o+"ffmpeg-core.wasm","application/wasm"),t=""}a=new l;const i={coreURL:c,wasmURL:r};t&&(i.workerURL=t),await a.load(i),m=!0}async function _(s,e){await w(),a.on("progress",({progress:n})=>{e&&e(Math.max(0,Math.min(100,Math.round(n*100))))});const{fetchFile:c}=await p(async()=>{const{fetchFile:n}=await import("./index-607UPNXL.js");return{fetchFile:n}},[]),r=await c(s),t="input.webm",i="output.mp4";await a.writeFile(t,r);const o=["-i",t,"-c:v","libx264","-preset","veryfast","-crf","23","-pix_fmt","yuv420p","-c:a","aac","-b:a","128k","-movflags","+faststart",i];await a.exec(o);const f=await a.readFile(i),u=new Blob([f],{type:"video/mp4"});try{await a.deleteFile(t)}catch{}try{await a.deleteFile(i)}catch{}return u}export{_ as transcodeWebmToMp4};
