import{_ as c}from"./index-DNdUy3W9.js";let p=!1,l=null,t=null;async function w(){if(p)return;const[{FFmpeg:n},e]=await Promise.all([c(()=>import("./index-CUxsIblL.js"),[]),c(()=>import("./index-607UPNXL.js"),[])]);l=n;let i,r;const a="https://swing-platform.brianduryea.workers.dev/api/ffmpeg-core/";i=await e.toBlobURL(a+"ffmpeg-core.js","text/javascript"),r=await e.toBlobURL(a+"ffmpeg-core.wasm","application/wasm"),t=new l;const o={coreURL:i,wasmURL:r};await t.load(o),p=!0}async function d(n,e){await w(),t.on("progress",({progress:s})=>{e&&e(Math.max(0,Math.min(100,Math.round(s*100))))});const{fetchFile:i}=await c(async()=>{const{fetchFile:s}=await import("./index-607UPNXL.js");return{fetchFile:s}},[]),r=await i(n),a="input.webm",o="output.mp4";await t.writeFile(a,r);const m=["-i",a,"-c:v","libx264","-preset","veryfast","-crf","23","-pix_fmt","yuv420p","-c:a","aac","-b:a","128k","-movflags","+faststart",o];await t.exec(m);const f=await t.readFile(o),u=new Blob([f],{type:"video/mp4"});try{await t.deleteFile(a)}catch{}try{await t.deleteFile(o)}catch{}return u}export{d as transcodeWebmToMp4};
