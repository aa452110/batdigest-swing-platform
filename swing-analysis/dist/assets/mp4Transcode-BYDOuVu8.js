import{_ as c}from"./index-CXgRLT5_.js";let p=!1,m=null,t=null;async function w(){if(p)return;const[{FFmpeg:r},n]=await Promise.all([c(()=>import("./index-CUxsIblL.js"),[]),c(()=>import("./index-607UPNXL.js"),[])]);m=r;let o,i;const a="https://swing-platform.brianduryea.workers.dev/api/ffmpeg-core/";o=a+"ffmpeg-core.js",i=a+"ffmpeg-core.wasm",t=new m;const e={coreURL:o,wasmURL:i};await t.load(e),p=!0}async function d(r,n){await w(),t.on("progress",({progress:s})=>{n&&n(Math.max(0,Math.min(100,Math.round(s*100))))});const{fetchFile:o}=await c(async()=>{const{fetchFile:s}=await import("./index-607UPNXL.js");return{fetchFile:s}},[]),i=await o(r),a="input.webm",e="output.mp4";await t.writeFile(a,i);const l=["-i",a,"-map","0:v:0","-map","0:a:0","-c:v","libx264","-pix_fmt","yuv420p","-preset","veryfast","-crf","23","-c:a","aac","-b:a","128k","-ac","2","-ar","48000","-movflags","+faststart","-shortest",e];await t.exec(l);const f=await t.readFile(e),u=new Blob([f],{type:"video/mp4"});try{await t.deleteFile(a)}catch{}try{await t.deleteFile(e)}catch{}return u}export{d as transcodeWebmToMp4};
