import{_ as p}from"./index-CGwVc-mQ.js";let n=!1,m=null,e=null;async function u(){if(n)return;const[{FFmpeg:c},a]=await Promise.all([p(()=>import("./index-CUxsIblL.js"),[]),p(()=>import("./index-607UPNXL.js"),[])]);m=c;let i,r,o;try{const t="https://unpkg.com/@ffmpeg/core@0.12.10/dist/umd/";i=await a.toBlobURL(t+"ffmpeg-core.js","text/javascript"),r=await a.toBlobURL(t+"ffmpeg-core.wasm","application/wasm"),o=await a.toBlobURL(t+"ffmpeg-core.worker.js","text/javascript")}catch{const t="https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.10/dist/umd/";i=await a.toBlobURL(t+"ffmpeg-core.js","text/javascript"),r=await a.toBlobURL(t+"ffmpeg-core.wasm","application/wasm"),o=await a.toBlobURL(t+"ffmpeg-core.worker.js","text/javascript")}e=new m,await e.load({coreURL:i,wasmURL:r,workerURL:o}),n=!0}async function _(c,a){await u(),e.on("progress",({progress:s})=>{a&&a(Math.max(0,Math.min(100,Math.round(s*100))))});const{fetchFile:i}=await p(async()=>{const{fetchFile:s}=await import("./index-607UPNXL.js");return{fetchFile:s}},[]),r=await i(c),o="input.webm",t="output.mp4";await e.writeFile(o,r);const l=["-i",o,"-c:v","libx264","-preset","veryfast","-crf","23","-pix_fmt","yuv420p","-c:a","aac","-b:a","128k","-movflags","+faststart",t];await e.exec(l);const f=await e.readFile(t),w=new Blob([f],{type:"video/mp4"});try{await e.deleteFile(o)}catch{}try{await e.deleteFile(t)}catch{}return w}export{_ as transcodeWebmToMp4};
