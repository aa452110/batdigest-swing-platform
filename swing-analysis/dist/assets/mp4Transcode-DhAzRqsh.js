import{_ as p}from"./index-CWOk9qsX.js";let l=!1,m=null,t=null;async function u(){if(l)return;const[{FFmpeg:c},o]=await Promise.all([p(()=>import("./index-CUxsIblL.js"),[]),p(()=>import("./index-607UPNXL.js"),[])]);m=c;let i,r,a;const e="https://swing-platform.brianduryea.workers.dev/api/ffmpeg-core/";i=await o.toBlobURL(e+"ffmpeg-core.js","text/javascript"),r=await o.toBlobURL(e+"ffmpeg-core.wasm","application/wasm"),a=await o.toBlobURL(e+"ffmpeg-core.worker.js","text/javascript"),t=new m;const s={coreURL:i,wasmURL:r};a&&(s.workerURL=a),await t.load(s),l=!0}async function d(c,o){await u(),t.on("progress",({progress:n})=>{o&&o(Math.max(0,Math.min(100,Math.round(n*100))))});const{fetchFile:i}=await p(async()=>{const{fetchFile:n}=await import("./index-607UPNXL.js");return{fetchFile:n}},[]),r=await i(c),a="input.webm",e="output.mp4";await t.writeFile(a,r);const s=["-i",a,"-c:v","libx264","-preset","veryfast","-crf","23","-pix_fmt","yuv420p","-c:a","aac","-b:a","128k","-movflags","+faststart",e];await t.exec(s);const f=await t.readFile(e),w=new Blob([f],{type:"video/mp4"});try{await t.deleteFile(a)}catch{}try{await t.deleteFile(e)}catch{}return w}export{d as transcodeWebmToMp4};
