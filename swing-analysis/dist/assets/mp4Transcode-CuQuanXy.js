import{_ as c}from"./index-DeCBS8Gq.js";let p=!1,l=null,t=null;async function w(){if(p)return;const[{FFmpeg:r},n]=await Promise.all([c(()=>import("./index-CUxsIblL.js"),[]),c(()=>import("./index-607UPNXL.js"),[])]);l=r;let o,i;const e="https://swing-platform.brianduryea.workers.dev/api/ffmpeg-core/";o=e+"ffmpeg-core.js",i=e+"ffmpeg-core.wasm",t=new l;const a={coreURL:o,wasmURL:i};await t.load(a),p=!0}async function d(r,n){await w(),t.on("progress",({progress:s})=>{n&&n(Math.max(0,Math.min(100,Math.round(s*100))))});const{fetchFile:o}=await c(async()=>{const{fetchFile:s}=await import("./index-607UPNXL.js");return{fetchFile:s}},[]),i=await o(r),e="input.webm",a="output.mp4";await t.writeFile(e,i);const m=["-i",e,"-c:v","libx264","-preset","veryfast","-crf","23","-pix_fmt","yuv420p","-c:a","aac","-b:a","128k","-movflags","+faststart",a];await t.exec(m);const f=await t.readFile(a),u=new Blob([f],{type:"video/mp4"});try{await t.deleteFile(e)}catch{}try{await t.deleteFile(a)}catch{}return u}export{d as transcodeWebmToMp4};
