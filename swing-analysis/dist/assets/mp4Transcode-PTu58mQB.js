import{_ as p}from"./index-D4Od7sYT.js";let l=!1,m=null,t=null;async function w(){if(l)return;const[{FFmpeg:s},o]=await Promise.all([p(()=>import("./index-CUxsIblL.js"),[]),p(()=>import("./index-607UPNXL.js"),[])]);m=s;let i,r,a;const e="https://swing-platform.brianduryea.workers.dev/api/ffmpeg-core/";i=await o.toBlobURL(e+"ffmpeg-core.js","text/javascript"),r=await o.toBlobURL(e+"ffmpeg-core.wasm","application/wasm"),a="",t=new m;const n={coreURL:i,wasmURL:r};a&&(n.workerURL=a),await t.load(n),l=!0}async function d(s,o){await w(),t.on("progress",({progress:c})=>{o&&o(Math.max(0,Math.min(100,Math.round(c*100))))});const{fetchFile:i}=await p(async()=>{const{fetchFile:c}=await import("./index-607UPNXL.js");return{fetchFile:c}},[]),r=await i(s),a="input.webm",e="output.mp4";await t.writeFile(a,r);const n=["-i",a,"-c:v","libx264","-preset","veryfast","-crf","23","-pix_fmt","yuv420p","-c:a","aac","-b:a","128k","-movflags","+faststart",e];await t.exec(n);const f=await t.readFile(e),u=new Blob([f],{type:"video/mp4"});try{await t.deleteFile(a)}catch{}try{await t.deleteFile(e)}catch{}return u}export{d as transcodeWebmToMp4};
